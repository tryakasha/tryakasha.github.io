암호화 방식에는 대칭키 암호화 방식과 비대칭키 암호화 방식이 있는데, 두 방식의 차이를 이해해 보자.



### 대칭키

대칭키는 암호화할때와 복호화할때 같은 키를 사용하는 방식이며, 키를 노출되면 안되기 때문에 비밀키 방식이라고도 한다.

따라서 해당 키를 아는 사람만이 데이터를 암복호화할 수 있으며 대표적인 알고리즘으로 DES, 3DES, AES등이 있다.

대칭키(비밀키)방식은 비대칭키방식에 비해 속도가 빠르지만 키교환의 이슈가 있다. 키가 탈취될 수 있고 모든 사용자가 키교환이 필요하기에 관리해야할 키가 상당히 많아진다.

> 이러한 키교환의 문제는 Deffie-Hellman 키교환에 의하여 해결되었다. 아래에서 다시 다루도록 하겠다.



* 암, 복호화 키가 동일한 암호화 방식이며 비밀키방식 이라고도 부른다.
* DES, 3DES, AES등이 있다.
* 수행시간이 짧은 장점이 있다.
* 키교환의 이슈가 있으며, 키관리의 어려움이 단점으로 꼽힌다.



#### DES 방식

* 페이스텔 구조의 블록 대칭키 암호화 방식
* 16라운드로 구성되어 있어 16번의 페이스텔 암호를 수행한다. (16번 반복한다는 의미)
* 64비트의 평문을 암호화하고, 결과도 64비트가 나온다.
* 키는 64비트이지만 7비트당 1비트의 parity비트가 포함되어있기 때문에 실질적으로 56비트이다.
* 56비트의 키를 사용하여 각 라운드에서 서브키가 만들어지는 동시에 사용된다.

64비트의 평문을 2등분하여 32비트씩 나눈후 서로 스위칭하며 암호화하는 방식이다.



##### 페이스텔 구조??

대칭 블록 암호 알고리즘으로, 두개 이상의 암호가 연속적으로 수행되는 방식이다.

암호화 과정에서 라운드함수가 사용되며, 대표적인 블록 암호화방식인 DES, SEED등이 페이스텔 구조를 갖는다.

페이스텔 구조에서 라운드수는 원하는 만큼 늘릴 수 있으며, 늘어날 수록 보안성이 강화된다. 일반적으로 16라운드를 사용한다.

페이스텔 구조의 가장 큰 특징으로 암,복호화 알고리즘이 동일하고, 복호화할때 역함수가 필요 없다는 특징이 있다.

> 보통 암호화할때 F함수를 사용하여 암호화 했다면, 복호화할때 함수 F의 역함수를 사용한다.



#### 3DES

트리플 DES는 단순하게 DES알고리즘을 3번 적용한 알고리즘이고, 키는 기존 56비트 * 3을 하여 168비트 이다. (일반적으로 56 * 2 = 112비트의 키를 사용해도 충분히 안전하다고 한다.)

DES알고리즘의 복호화가 가능해져 AES가 나오기전까지 임시로 사용한 알고리즘이고 2개의 키(k1, k2)를 사용하여 암호화한다.

방식은 이렇다

암호화(k1) > 복호화(k2) > 암호화(k2)



#### AES

DES같은 페이스텔 구조는 역함수가 필요없다는 장점이 있지만, 안전성의 문제로 잘 사용되지 않는다. 이에따라 같은 대칭키 알고리즘인 AES를 많이 사용한다.

DES에 비하여 키 사이즈가 자유롭고, 가변블록 및 가변키 사용이 가능하다.(DES는 64비트)

* 키 길이는 128, 192, 256비트가 있고, 각 키마다 10, 12, 14라운드를 돌린다.
* DES와는 다르게 병렬 연산이 가능하기때문에 속도와 효율에서 좋다.(디자인이 간단하다고 한다)
* 페이스텔 구조가 아닌 SPN구조를 사용한다. 
* 복호화할때 별도의 모듈을 구현해야 한다.



##### SPN 구조??

SPN구조는 암복호화 과정에서 역함수가 필요하도록 설계되어야 한다는 단점이 있지만, 병렬 연산으로 효율적인 설계가 가능하다.

대표적으로 AES가 있고 현재 널리 사용중이다.

> Subsitution Cipher, Permutation Cipher를 중첩하는 형태로 개발되었으며, input을 여러개의 소 블럭으로 나눈 후 S-box로 대치, 출력을 P-box로 전치하는 과정을 반복하는 방식이라고 한다.

Subsitution Cipher는 각각 대칭되는 다른 숫자나 단어로 치환시킨다는 뜻이고, Permutaion Cipher는 일정 규칙에따라 재배치 한다는 뜻이다.



### 비대칭키

비대칭키는 암호화할때와 복호화할때 다른 키를 사용하는 방식이며, 하나의 키를 공개하기때문에 공개키 방식이라고도 한다.

키가 공개되어 있기 때문에 키를 교환할 필요가 없어지며 공개키는 모든 사람이 접근 가능하다.

공개키와는 반대로 개인키는 각 사용자만이 가지고 있는 키를 의미한다.

> 데이터를 전송할때 공개키로 암호화하고, 개인키로 복호화하는 방식
>
> 즉, 개인키를 소유한 사람만이 암호화된 데이터를 복호화할 수 있다.



* 암, 복호화 키가 다른 두개의 키를 가진 방식으로 공개키방식 이라고도 부른다.
* 개인키를 가진 사용자만이 복호화를 할 수 있기에 인증, 기밀성, 부인방지 기능을 제공한다.
* 대칭키 암호화 방식에 비하여 속도가 떨어지는 단점이 있다.

+ 대표적인 알고리즘은 RSA, ECC, DSA등이 있다.



#### RSA

기본 형태는 DES같은 대칭키 암호화와 같게 키를 사용하여 암,복호화 하지만, 암복호화에 사용되는 키가 다르다는 것이 차이점이다.

RSA 뿐만아니라 공개키 알고리즘은 모두 일방향 함수를 사용하여 암호화를 수행하고, 평문은 암호화하기 쉽지만 복호화하는 일은 매우 어렵다.

> 반대쪽으로 계산하는 것을 일방향 함수의 역변환이라고 한다.



두개의 매우 큰 소수의 곱을 구하는것은 쉽지만, 원래의 두 소수를 구하는 것은 매우 어렵다는 것을 이용한 방식의 알고리즘이 RSA 방식이다.



#### ECC

Elliptic Curve Cyptosystem(타원 곡선 암호)

키 길이가 긴 RSA, ElGamal의 단점을 보완하기 위해 개발된 알고리즘으로 타원 곡선 이산대수의 문제에 기초한 공개키 암호 알고리즘이다.

RSA방식에 비하여 키 크기가 작고 속도가 빠르기 때문에 소형 모바일 환경에서 주로 사용한다.

ECC 알고리즘을 실제고 적용한 분야와 알고리즘명은 아래와 같다.

* ECDSA - 디지털 서명 용도 (타원곡선암호를 **전자서명**에 접목시킨 암호 알고리즘)

* ECDH - 키 교환 용도



#### DSA

위의 두 알고리즘과 같은 비대칭형 암호화 방식으로 이산로그 문제에 기반을 두었다.

메세지 다이제스트와 개인키를 혼합하여 서명 요소를 생성하고, 메세지 다이제스트와 공개키를 혼합하여 서명을 검증한다.

즉, 개인키로 사인한것을 공개키로 검증할 수 있다.

이는 ElGamal 알고리즘을 이용하여 개발한 전자 서명 방식으로 DSS라고도 부른다.



#### DCDSA

ECC에 기반을 둔 전자 서명 알고리즘이다. 난수를 이용하여 비밀키 K와 함께 메세지에 서명하는 점이라는 것에 DSA와 동일하지만 ECC를 접목하여 공개키의 크기를 줄였다.

DSA보다 키 길이는 작지만 보안성은 향상된 방식이다.

> EdDSA는 난수 대신 해시를 사용한다는 점에서 차이가 있다. (Edwards curve)



#### ECDH

Elliptic CUrve Deffie-Hellman

디피헬만 키 교환 방식으로 대칭키의 키교환 이슈를 해결한 방식이다.

위키 백과를 보면,

![ECDH](..\image\2022-01-16\ECDH.PNG)

쉽게말해 **상대방의 pubKey, 내 privKey**를 연산하여 나온 값이 **내 Pubkey와 상대의 PrivKey**를 연산하여 나온 값이 동일하며, 이를 Shared Secret이라고 부른다.

ECDH기반의 암호들은 이 Shared Secret 을 해쉬하여 대칭키를 만든다.